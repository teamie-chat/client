!function(){"use strict";var e=angular.module("tChat",["ui.bootstrap"]);e.run(["ThreadService",function(e){var t,r;t=[{name:"Tom"},{name:"Dick"},{name:"Harry"}],r=[{name:"Classroom"}],e.openThread("direct",[t[0]]),e.openThread("multi",[t[1],t[2]]),e.openThread("group",[r[0]])}])}(),angular.module("tChat").directive("tChatThreads",["ThreadService",function(e){"use strict";function t(t){t.threads=e.getOpenedThreads}return{restrict:"A",replace:!0,scope:{},templateUrl:"src/partials/t-chat-threads.html",link:t}}]),angular.module("tChat").directive("tChatThread",[function(){"use strict";return{restrict:"A",replace:!0,scope:{thread:"="},templateUrl:"src/partials/t-chat-thread.html",controller:"ThreadController"}}]),angular.module("tChat").directive("tChatWidget",function(){"use strict";return{restrict:"A",replace:!0,scope:{title:"@"},templateUrl:"src/partials/t-chat-widget.html"}}),angular.module("tChat").controller("ThreadController",["$scope","$log","ThreadService",function(e,t,r){"use strict";e.ui={minimized:0,highlighted:0,users:[]},e.close=function(){t.log("close thread "+e.thread.tid),r.closeThread(e.thread.tid)},e.mute=function(){},e.addUsers=function(e){e=e||[]},e.getMessages=function(e,t){t=t||25},e.removeUser=function(){},e.$on("$destroy",function(){t.log("thread "+e.thread.tid+" has been destroyed")})}]),angular.module("tChat").controller("UserListController",["$scope","ThreadService",function(e,t){"use strict";e.data={search:""},e.users=[{uid:1,name:"Administrator"},{uid:2,name:"Alan Turing"}],e.chat=function(e){t.openThread("direct",[e])}}]),angular.module("tChat").controller("GroupListController",["$scope","ThreadService",function(e,t){"use strict";e.data={search:""},e.groups=[{uid:1,name:"Physics Class"},{uid:2,name:"English Class"}],e.chat=function(e){t.openThread("group",[e])}}]),angular.module("tChat").controller("ArchiveController",["$scope",function(e){"use strict";e.threads=[{tid:1,title:"Physics Class",lastMessage:"Bye guys"},{tid:2,title:"Ravi, Barack",lastMessage:"See you. Lets catch up sometime."}]}]),angular.module("tChat").filter("reverse",function(){"use strict";return function(e){return e.slice().reverse()}}),angular.module("tChat").factory("ThreadService",["$log",function(e){"use strict";function t(){return"temp."+ ++l}function r(){return h}function n(e){return e.name}function a(t){return 1===t.length?n(t[0]):2===t.length?_.str.sprintf("%s, %s & you",t[0].name,t[1].name):t.length>2?_.str.sprintf("%s, %s, you & %d others",t[0].name,t[1].name,t.length-1):(e.warn("multi-user thread has "+t.length+" users."),"")}function s(e){return e.name}function o(e,r){var n={tid:t(),title:i(e,r),type:e,_state:"open"};switch(e){case"direct":case"multi":n.users=r;break;case"group":n.group=r[0];break;default:throw new Error("thread has unknown type: "+e)}return n}function i(e,t){if(!t.length)throw new Error("need at least one entity.");switch(e){case"direct":return n(t[0]);case"multi":return a(t);case"group":return s(t[0]);default:throw new Error("thread has unknown type: "+e)}}function u(e,t){h.push(o(e,t))}function c(t){h=_.filter(h,function(e){return e.tid!==t}),e.log(h.length+" threads remain")}var l=0,h=[];return{openThread:u,closeThread:c,getOpenedThreads:r}}]);
angular.module("tChat").run(["$templateCache", function($templateCache) {$templateCache.put("src/partials/t-chat-thread.html","<div class=\"col-xs-4 panel-thread-container\" data-ng-class=\"{\n    \'panel-container-minimized\': ui.minimized == 1\n  }\">\n  <div class=\"panel panel-thread panel-thread-{{ thread.type }} panel-default\" data-ng-class=\"{\n      \'panel-success\': ui.highlighted,\n    }\" data-tid=\"{{ thread.tid }}\">\n    <div class=\"panel-heading\">\n      <div class=\"panel-heading-buttons pull-right\">\n        <div class=\"btn-group\" data-dropdown>\n          <button type=\"button\" class=\"btn btn-xs btn-default btn-actions dropdown-toggle\" id=\"t-chat-thread-settings-{{ thread.tid }}\" \n          data-toggle=\"dropdown\">\n            <i class=\"glyphicon glyphicon-cog\"></i>\n          </button>\n          <ul class=\"dropdown-menu\" role=\"menu\" aria-labelledby=\"t-chat-thread-settings-{{ thread.tid }}\">\n            <li role=\"presentation\">\n              <a role=\"menuitem\" tabindex=\"-1\" href=\"#\">\n                <i class=\"glyphicon glyphicon-user\"></i> Add more people\n              </a>\n            </li>\n            <li role=\"presentation\" data-ng-if=\"thread.type === \'multi\'\">\n              <a role=\"menuitem\" tabindex=\"-1\" href=\"#\">\n                <i class=\"glyphicon glyphicon-off\"></i> Leave\n              </a>\n            </li>\n          </ul>\n          <button type=\"button\" class=\"btn btn-xs btn-default btn-resize\" \n            data-ng-click=\"ui.minimized = !ui.minimized\">\n            <i class=\"glyphicon\" data-ng-class=\"{ \n              \'glyphicon-minus\': ui.minimized == 0,\n              \'glyphicon-plus\': ui.minimized == 1 }\">\n            </i>\n          </button>\n          <button type=\"button\" class=\"btn btn-xs btn-default btn-close\" data-ng-click=\"close()\">\n            <i class=\"glyphicon glyphicon-remove\"></i>\n          </button>\n        </div>\n      </div>  \n      <div class=\"panel-title\" data-ng-if=\"thread.title\">\n        {{ thread.title }} <span class=\"badge badge-danger\"> 2 </span>\n      </div>\n    </div>\n    <div class=\"panel-content\" data-ng-show=\"!ui.minimized\">\n      <div class=\"panel-body\"></div>\n      <div class=\"panel-footer\">\n        <input type=\"text\" class=\"form-control\" name=\"chat\" placeholder=\"Send a message.\">\n      </div>\n    </div>\n  </div>\n</div>");
$templateCache.put("src/partials/t-chat-threads.html","<div class=\"col-xs-8\">\n  <div class=\"container-threads row\">\n    <div data-t-chat-thread\n         data-ng-repeat=\"t in threads() | reverse | limitTo:3 track by t.tid \"\n         data-thread=\"t\"\n         data-tid=\"{{ t.tid }}\">\n    </div>\n  </div>\n</div>");
$templateCache.put("src/partials/t-chat-widget.html","<div class=\"col-xs-4 panel-chat-widget-container\">\n  <div class=\"panel panel-default panel-chat-widget\">\n    <div class=\"panel-heading\">\n      <div class=\"panel-title\">\n        Teamie Chat\n      </div>\n    </div>\n    <div class=\"panel-body\">\n      <tabset>\n        <tab ng-controller=\"UserListController\">\n          <tab-heading><i class=\"glyphicon glyphicon-user\"></i>&nbsp;&nbsp;People</tab-heading>\n          <div class=\"search-user-container input-group\">\n            <div class=\"input-group-addon\"><i class=\"glyphicon glyphicon-search\"></i></div>\n            <input type=\"search\" class=\"form-control input-sm search-user\" placeholder=\"Eg. John Doe\" \n            ng-model=\"data.search\"/>\n          </div>\n          <div class=\"list-people list-group\">\n            <a href=\"\" ng-click=\"chat(user)\" ng-repeat=\"user in users | filter:data.search\" class=\"list-group-item\" \n            data-uid=\"{{ user.uid }}\">\n              {{ user.name }}\n            </a>\n          </div>\n        </tab>\n        <tab ng-controller=\"GroupListController\">\n          <tab-heading><i class=\"glyphicon glyphicon-list-alt\"></i>&nbsp;&nbsp;Groups</tab-heading>\n          <div class=\"input-group search-group-container\">\n            <div class=\"input-group-addon\"><i class=\"glyphicon glyphicon-search\"></i></div>\n            <input type=\"search\" class=\"form-control input-sm\" placeholder=\"Eg. Some class\" \n            ng-model=\"data.search\"/>\n          </div>\n          <div class=\"list-user-groups list-group\">\n            <a href=\"\" ng-repeat=\"group in groups | filter:data.search\" class=\"list-group-item\" ng-click=\"chat(group)\"\n            data-uid=\"{{ group.gid }}\">\n              {{ group.name }}\n            </a>\n          </div>\n        </tab>\n        <tab ng-controller=\"ArchiveController\">\n          <tab-heading><i class=\"glyphicon glyphicon-hdd\"></i>&nbsp;&nbsp;Archive</tab-heading>\n          <div class=\"list-archived-threads list-group\">\n            <a href=\"\" ng-repeat=\"thread in threads | filter:data.search\" class=\"list-group-item\" \n            data-uid=\"{{ group.gid }}\">\n              <h4 class=\"list-group-item-heading\">{{ thread.title }}</h4>\n              <p class=\"text-muted list-group-item-text\">{{ thread.lastMessage }}</p>\n            </a>\n          </div>\n        </tab>\n        <!-- <tab heading=\"Notifications\" ng-controller=\"NotificationsController\"></tab> -->\n      </tabset>\n    </div>\n  </div>\n</div>");}]);