!function(){"use strict";var t=angular.module("tChat",["ui.bootstrap"]);t.run(["ThreadService",function(t){var e,n;e=[{name:"Tom"},{name:"Dick"},{name:"Harry"}],n=[{name:"Classroom"}],t.openThread("direct",[e[0]]),t.openThread("multi",[e[1],e[2]]),t.openThread("group",[n[0]])}])}(),angular.module("tChat").directive("tChatThreads",["ThreadService",function(t){"use strict";function e(e){e.threads=t.getOpenedThreads}return{restrict:"A",replace:!0,scope:{},templateUrl:"/src/partials/t-chat-threads.html",link:e}}]),angular.module("tChat").directive("tChatThread",[function(){"use strict";return{restrict:"A",replace:!0,scope:{thread:"="},templateUrl:"/src/partials/t-chat-thread.html",controller:"ThreadController"}}]),angular.module("tChat").directive("tChatWidget",function(){"use strict";return{restrict:"A",replace:!0,scope:{title:"@"},templateUrl:"/src/partials/t-chat-widget.html"}}),angular.module("tChat").controller("ThreadController",["$scope","$log","ThreadService",function(t,e,n){"use strict";t.ui={minimized:0,highlighted:0,users:[]},t.close=function(){e.log("close thread "+t.thread.tid),n.closeThread(t.thread.tid)},t.mute=function(){},t.addUsers=function(t){t=t||[]},t.getMessages=function(t,e){e=e||25},t.removeUser=function(){},t.$on("$destroy",function(){e.log("thread "+t.thread.tid+" has been destroyed")})}]),angular.module("tChat").controller("UserListController",["$scope","ThreadService",function(t,e){"use strict";t.data={search:""},t.users=[{uid:1,name:"Administrator"},{uid:2,name:"Alan Turing"}],t.chat=function(t){e.openThread("direct",[t])}}]),angular.module("tChat").controller("GroupListController",["$scope","ThreadService",function(t,e){"use strict";t.data={search:""},t.groups=[{uid:1,name:"Physics Class"},{uid:2,name:"English Class"}],t.chat=function(t){e.openThread("group",[t])}}]),angular.module("tChat").controller("ArchiveController",["$scope",function(t){"use strict";t.threads=[{tid:1,title:"Physics Class",lastMessage:"Bye guys"},{tid:2,title:"Ravi, Barack",lastMessage:"See you. Lets catch up sometime."}]}]),angular.module("tChat").filter("reverse",function(){"use strict";return function(t){return t.slice().reverse()}}),angular.module("tChat").factory("ThreadService",["$log",function(t){"use strict";function e(){return"temp."+ ++d}function n(){return p}function s(t){return t.name}function a(e){return 1===e.length?s(e[0]):2===e.length?_.str.sprintf("%s, %s & you",e[0].name,e[1].name):e.length>2?_.str.sprintf("%s, %s, you & %d others",e[0].name,e[1].name,e.length-1):(t.warn("multi-user thread has "+e.length+" users."),"")}function r(t){return t.name}function i(t,n){var s={tid:e(),title:o(t,n),type:t,_state:"open"};switch(t){case"direct":case"multi":s.users=n;break;case"group":s.group=n[0];break;default:throw new Error("thread has unknown type: "+t)}return s}function o(t,e){if(!e.length)throw new Error("need at least one entity.");switch(t){case"direct":return s(e[0]);case"multi":return a(e);case"group":return r(e[0]);default:throw new Error("thread has unknown type: "+t)}}function c(t,e){p.push(i(t,e))}function l(e){p=_.filter(p,function(t){return t.tid!==e}),t.log(p.length+" threads remain")}var d=0,p=[];return{openThread:c,closeThread:l,getOpenedThreads:n}}]),angular.module("tChat").run(["$templateCache",function(t){t.put("src/demo/index.html",'<!DOCTYPE html>\n  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->\n  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->\n  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->\n  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->\n  <head>\n    <meta charset="utf-8">\n    <title>Teamie Chat Demo</title>\n    <meta name="description" content="A sample web app to show the Teamie Chat client in action.">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <!-- build:css(src/demo) vendor.css -->\n    <link href="../../bower_components/bootstrap-css-only/css/bootstrap.css" type="text/css" rel="stylesheet">\n    <!-- endbuild -->\n    <!-- build:css(src/demo) ../teamie-chat.css -->\n    <link href="../styles/chat.css" type="text/css" rel="stylesheet">\n    <!-- endbuild -->\n    <style>\n      .container.main {\n        margin-top: 1em;\n      }\n      .bootswatch-themes-container {\n        margin-top: 3em;\n      }\n    </style>\n    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->\n  </head>\n  <body>\n    <!--[if lt IE 7]>\n        <p class="browsehappy">You are using an <strong>outdated</strong> browser. \n        Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>\n    <![endif]-->\n\n    <noscript>\n      <div class="container">\n        <div class="alert alert-block alert-warning">\n          Teamie Chat requires Javascript to be enabled in your browser for it to work. Your browser either\n          does not support Javascript or you have it disabled. \n          <a href="http://www.enable-javascript.com/" target="_blank">Learn</a> \n          how you can change this for your browser or switch to a \n          <a href="http://browsehappy.com" target="_blank">supported web browser</a> and try again.\n        </div>\n      </div>\n    </noscript>\n\n    <div class="container main clearfix">\n      <div class="pull-left">\n        <h1><span>Vanilla Bootstrap</span> <small>Chat</small></h1>\n        <p class="text-muted">A theme switch will take a few seconds to apply. \n          Check out <a href="http://bootswatch.com/" target="_blank">Bootswatch</a>.</p>\n      </div>\n      <div class="pull-right bootswatch-themes-container">\n        <label for="bootswatch-switcher">Try another theme: </label>\n        <select name="bootswatch-switcher" class="bootswatch-themes"></select>\n      </div>\n    </div>\n    <div class="divider"></div>\n\n    <div class="t-chat-container container-fluid" data-ng-app="tChat">\n      <div class="row">\n        <div data-t-chat-threads></div>\n        <div data-t-chat-widget></div>\n      </div>\n    </div>\n\n    <!-- build:js(src/demo) vendor.js -->\n    <script src="../../bower_components/jquery/dist/jquery.js"></script>\n    <script src="../../bower_components/angular/angular.js"></script>\n    <script src="../../bower_components/angular-sanitize/angular-sanitize.js"></script>\n    <script src="../../bower_components/socket.io-client/socket.io.js"></script>\n    <script src="../../bower_components/underscore/underscore.js"></script>\n    <script src="../../bower_components/underscore.string/lib/underscore.string.js"></script>\n    <script src="../../bower_components/chosen/chosen.jquery.js"></script>\n    <script src="../../bower_components/jquery-timeago/jquery.timeago.js"></script>\n    <script src="../../bower_components/angular-ui-bootstrap-bower/ui-bootstrap-tpls.js"></script>\n    <!-- endbuild -->\n\n    <script>\n    (function($) {\n      $.get(\'http://api.bootswatch.com/3/\', function (data) {\n        var themes = data.themes;\n        themes.unshift({\n          name: \'Vanilla Bootstrap\',\n          css: \'bower_components/bootstrap-css-only/css/bootstrap.css\'\n        });\n        var select = $(\'select.bootswatch-themes\');\n        select.show();\n        themes.forEach(function(value, index) {\n          select.append($(\'<option />\')\n            .val(index)\n            .text(value.name));\n        });\n        \n        select.change(function() {\n          var theme = themes[$(this).val()];\n          $(\'link:first\').attr(\'href\', theme.css);\n          $(\'h1 > span\').text(theme.name);\n        });\n\n      }, \'json\').fail(function(){\n        // -- @todo Handle error -- //\n      });\n    })(jQuery);\n    </script>\n\n    <!-- build:js(src/demo) ../teamie-chat.js -->\n    <script src="../scripts/app.js"></script>\n    <script src="../scripts/directives/threads.js"></script>\n    <script src="../scripts/directives/thread.js"></script>\n    <script src="../scripts/directives/widget.js"></script>\n    <script src="../scripts/controllers/ThreadController.js"></script>\n    <script src="../scripts/controllers/UserListController.js"></script>\n    <script src="../scripts/controllers/GroupListController.js"></script>\n    <script src="../scripts/controllers/ThreadArchiveController.js"></script>\n    <script src="../scripts/filters/ArrayReverseFilter.js"></script>\n    <script src="../scripts/services/ThreadService.js"></script>\n    <!-- endbuild -->\n  </body>\n</html>'),t.put("src/partials/t-chat-thread.html",'<div class="col-xs-4 panel-thread-container" data-ng-class="{\n    \'panel-container-minimized\': ui.minimized == 1\n  }">\n  <div class="panel panel-thread panel-thread-{{ thread.type }} panel-default" data-ng-class="{\n      \'panel-success\': ui.highlighted,\n    }" data-tid="{{ thread.tid }}">\n    <div class="panel-heading">\n      <div class="panel-heading-buttons pull-right">\n        <div class="btn-group" data-dropdown>\n          <button type="button" class="btn btn-xs btn-default btn-actions dropdown-toggle" id="t-chat-thread-settings-{{ thread.tid }}" \n          data-toggle="dropdown">\n            <i class="glyphicon glyphicon-cog"></i>\n          </button>\n          <ul class="dropdown-menu" role="menu" aria-labelledby="t-chat-thread-settings-{{ thread.tid }}">\n            <li role="presentation">\n              <a role="menuitem" tabindex="-1" href="#">\n                <i class="glyphicon glyphicon-user"></i> Add more people\n              </a>\n            </li>\n            <li role="presentation" data-ng-if="thread.type === \'multi\'">\n              <a role="menuitem" tabindex="-1" href="#">\n                <i class="glyphicon glyphicon-off"></i> Leave\n              </a>\n            </li>\n          </ul>\n          <button type="button" class="btn btn-xs btn-default btn-resize" \n            data-ng-click="ui.minimized = !ui.minimized">\n            <i class="glyphicon" data-ng-class="{ \n              \'glyphicon-minus\': ui.minimized == 0,\n              \'glyphicon-plus\': ui.minimized == 1 }">\n            </i>\n          </button>\n          <button type="button" class="btn btn-xs btn-default btn-close" data-ng-click="close()">\n            <i class="glyphicon glyphicon-remove"></i>\n          </button>\n        </div>\n      </div>  \n      <div class="panel-title" data-ng-if="thread.title">\n        {{ thread.title }} <span class="badge badge-danger"> 2 </span>\n      </div>\n    </div>\n    <div class="panel-content" data-ng-show="!ui.minimized">\n      <div class="panel-body"></div>\n      <div class="panel-footer">\n        <input type="text" class="form-control" name="chat" placeholder="Send a message.">\n      </div>\n    </div>\n  </div>\n</div>'),t.put("src/partials/t-chat-threads.html",'<div class="col-xs-8">\n  <div class="container-threads row">\n    <div data-t-chat-thread\n         data-ng-repeat="t in threads() | reverse | limitTo:3 track by t.tid "\n         data-thread="t"\n         data-tid="{{ t.tid }}">\n    </div>\n  </div>\n</div>'),t.put("src/partials/t-chat-widget.html",'<div class="col-xs-4 panel-chat-widget-container">\n  <div class="panel panel-default panel-chat-widget">\n    <div class="panel-heading">\n      <div class="panel-title">\n        Teamie Chat\n      </div>\n    </div>\n    <div class="panel-body">\n      <tabset>\n        <tab ng-controller="UserListController">\n          <tab-heading><i class="glyphicon glyphicon-user"></i>&nbsp;&nbsp;People</tab-heading>\n          <div class="search-user-container input-group">\n            <div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div>\n            <input type="search" class="form-control input-sm search-user" placeholder="Eg. John Doe" \n            ng-model="data.search"/>\n          </div>\n          <div class="list-people list-group">\n            <a href="" ng-click="chat(user)" ng-repeat="user in users | filter:data.search" class="list-group-item" \n            data-uid="{{ user.uid }}">\n              {{ user.name }}\n            </a>\n          </div>\n        </tab>\n        <tab ng-controller="GroupListController">\n          <tab-heading><i class="glyphicon glyphicon-list-alt"></i>&nbsp;&nbsp;Groups</tab-heading>\n          <div class="input-group search-group-container">\n            <div class="input-group-addon"><i class="glyphicon glyphicon-search"></i></div>\n            <input type="search" class="form-control input-sm" placeholder="Eg. Some class" \n            ng-model="data.search"/>\n          </div>\n          <div class="list-user-groups list-group">\n            <a href="" ng-repeat="group in groups | filter:data.search" class="list-group-item" ng-click="chat(group)"\n            data-uid="{{ group.gid }}">\n              {{ group.name }}\n            </a>\n          </div>\n        </tab>\n        <tab ng-controller="ArchiveController">\n          <tab-heading><i class="glyphicon glyphicon-hdd"></i>&nbsp;&nbsp;Archive</tab-heading>\n          <div class="list-archived-threads list-group">\n            <a href="" ng-repeat="thread in threads | filter:data.search" class="list-group-item" \n            data-uid="{{ group.gid }}">\n              <h4 class="list-group-item-heading">{{ thread.title }}</h4>\n              <p class="text-muted list-group-item-text">{{ thread.lastMessage }}</p>\n            </a>\n          </div>\n        </tab>\n        <!-- <tab heading="Notifications" ng-controller="NotificationsController"></tab> -->\n      </tabset>\n    </div>\n  </div>\n</div>')}]);